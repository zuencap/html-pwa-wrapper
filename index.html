<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HTML → Installable PWA (Wrapper)</title>
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" href="./favicon.ico">
  <meta name="theme-color" content="#0ea5e9">
  <style>
    html, body { height: 100%; margin:0; }
    body { background: linear-gradient(120deg, #0b1220, #0b1324 50%, #0b1220); color: #e5e7eb; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .app { display:grid; grid-template-columns:320px 1fr; height:100dvh; }
    .app.panel-collapsed { grid-template-columns:0 1fr; }
    .panel { background:#0f172a; border-right:1px solid #1f2937; padding:12px; overflow:auto; display:flex; flex-direction:column; }
    .panel.collapsed { width:0; padding:0; border-right:none; overflow:hidden; }
    .panel-header { display:flex; align-items:center; justify-content:space-between; gap:8px; }
    .title { display:flex; align-items:center; gap:8px; }
    .icon-btn { background:transparent; border:1px solid #334155; color:#e5e7eb; border-radius:10px; padding:6px 8px; cursor:pointer; }
    .panel-section { margin-top:12px; }
    .controls { display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
    .stage { position:relative; }
    .stage iframe { position:absolute; inset:0; width:100%; height:100%; border:0; background:#fff; }
    button, .btn { appearance:none; border:none; background:linear-gradient(180deg,#1e293b,#0f172a); color:#e5e7eb; padding:10px 14px; border-radius:12px; cursor:pointer; border:1px solid #334155; }
    button:hover, .btn:hover { border-color:#475569; }
    .btn-accent { background: linear-gradient(180deg, #38bdf8, #0ea5e9); color:#0b1220; border-color:#38bdf8; font-weight:600; }
    .btn.danger { background: linear-gradient(180deg,#7f1d1d,#450a0a); border-color:#7f1d1d; }
    .float-toggle { position:absolute; bottom:12px; left:12px; z-index:5; background:#0ea5e9; color:#0b1220; border:0; border-radius:10px; padding:8px 10px; box-shadow:0 10px 30px rgba(0,0,0,.25); }
    #docList { list-style:none; padding:0; margin:8px 0 0; }
    #docList li { display:grid; grid-template-columns: 1fr auto; gap:8px; align-items:center; padding:8px; border:1px solid #1f2937; border-radius:10px; margin-bottom:8px; background:#0b162a; }
    #docList li.active { outline:2px solid #38bdf8; }
    .doc-meta { display:flex; flex-direction:column; gap:2px; }
    .doc-title { font-weight:600; color:#e5e7eb; text-align:left; background:transparent; border:none; padding:0; cursor:pointer; }
    .doc-time { font-size:.8rem; color:#94a3b8; }
    .doc-actions { display:flex; gap:6px; }
    .tiny { font-size:.8rem; opacity:.85; }
    .panel-footer { margin-top:auto; padding-top:8px; border-top:1px solid #1f2937; color:#94a3b8; display:flex; justify-content:space-between; align-items:center; }
    @media (max-width:900px){
      .app{ grid-template-columns:0 1fr; }
      .panel{ position:absolute; z-index:10; width:90%; max-width:420px; height:100%; }
      .app.panel-collapsed .panel{ transform: translateX(-100%); transition: transform .2s ease; }
      .app:not(.panel-collapsed) .panel{ transform: translateX(0); transition: transform .2s ease; }
    }
  </style>
</head>
<body>
  <div id="appRoot" class="app">
    <aside id="panel" class="panel">
      <div class="panel-header">
        <div class="title"><img alt="" src="./icons/192.png" width="22" height="22" style="border-radius:6px;"/><strong>HTML → PWA Wrapper</strong></div>
        <button id="togglePanel" class="icon-btn" title="Hide panel">⟨</button>
      </div>

      <div class="panel-section">
        <div class="controls">
          <button id="installBtn" class="btn-accent" hidden>Install</button>
          <a class="btn" href="#" id="exportBtn" download="content.html">Export</a>
          <button id="shareEmbedBtn" class="btn">Share link</button>
        </div>
        <p class="tiny">Share link encodes the current document into the URL. Very large pages may exceed URL limits.</p>
      </div>

      <div class="panel-section">
        <h3>Paste HTML</h3>
        <textarea id="input" placeholder="&lt;h1&gt;Hello!&lt;/h1&gt;"></textarea>
        <div class="controls">
          <button id="saveBtn" class="btn-accent">Save</button>
          <label>Title <input id="docTitle" type="text" placeholder="Optional"></label>
        </div>
      </div>

      <div class="panel-section">
        <div style="display:flex; align-items:center; justify-content:space-between;">
          <h3 style="margin:0;">Saved documents</h3>
          <span id="docCount" class="tiny"></span>
        </div>
        <ul id="docList"></ul>
      </div>

      <div class="panel-footer">
        <small id="appVersion" class="tiny">Version</small>
        <a href="https://github.com/zuencap/html-pwa-wrapper" target="_blank" rel="noopener" class="tiny" style="color:#9ca3af;">Repo</a>
      </div>
    </aside>

    <main class="stage">
      <iframe id="viewer" allow="geolocation" sandbox="allow-forms allow-pointer-lock allow-popups allow-modals allow-same-origin allow-scripts"></iframe>
      <button id="floatToggle" class="float-toggle" title="Show panel" hidden>☰</button>
    </main>
  </div>
  <script src="./app.js" type="module"></script>
</body>
</html>
