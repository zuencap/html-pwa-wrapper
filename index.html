<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HTML → Installable PWA (Wrapper)</title>
  <link rel="manifest" href="./manifest.webmanifest">
  <meta name="theme-color" content="#0ea5e9">
  <style>
    html, body { height: 100%; margin:0; }
    body { background: linear-gradient(120deg, #0b1220, #0b1324 50%, #0b1220); color: #e5e7eb; font-family: system-ui, sans-serif; }
    .app { display:grid; grid-template-columns:320px 1fr; height:100dvh; }
    .app.panel-collapsed { grid-template-columns:0 1fr; }
    .panel { background:#0f172a; border-right:1px solid #1f2937; padding:12px; overflow:auto; }
    .panel.collapsed { width:0; padding:0; border-right:none; overflow:hidden; }
    .panel-header { display:flex; align-items:center; justify-content:space-between; gap:8px; }
    .title { display:flex; align-items:center; gap:8px; }
    .icon-btn { background:transparent; border:1px solid #334155; color:#e5e7eb; border-radius:10px; padding:6px 8px; cursor:pointer; }
    .panel-section { margin-top:12px; }
    .controls { display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
    .check { display:flex; align-items:center; gap:8px; }
    .stage { position:relative; }
    .stage iframe { position:absolute; inset:0; width:100%; height:100%; border:0; background:#fff; }
    button, .btn { appearance:none; border:none; background:linear-gradient(180deg,#1e293b,#0f172a); color:#e5e7eb; padding:10px 14px; border-radius:12px; cursor:pointer; border:1px solid #334155; }
    button:hover, .btn:hover { border-color:#475569; }
    .btn-accent { background: linear-gradient(180deg, #38bdf8, #0ea5e9); color:#0b1220; border-color:#38bdf8; font-weight:600; }
    .btn.danger { background: linear-gradient(180deg,#7f1d1d,#450a0a); border-color:#7f1d1d; }
    .float-toggle { position:absolute; bottom:12px; left:12px; z-index:5; background:#0ea5e9; color:#0b1220; border:0; border-radius:10px; padding:8px 10px; box-shadow:0 10px 30px rgba(0,0,0,.25); }
    @media (max-width:900px){
      .app{ grid-template-columns:0 1fr; }
      .panel{ position:absolute; z-index:10; width:90%; max-width:420px; height:100%; }
      .app.panel-collapsed .panel{ transform: translateX(-100%); transition: transform .2s ease; }
      .app:not(.panel-collapsed) .panel{ transform: translateX(0); transition: transform .2s ease; }
    }
  </style>
</head>
<body>
  <div id="appRoot" class="app">
    <aside id="panel" class="panel">
      <div class="panel-header">
        <div class="title"><img alt="" src="./icons/192.png" width="22" height="22" style="border-radius:6px;"/><strong>HTML → PWA Wrapper</strong></div>
        <button id="togglePanel" class="icon-btn" title="Hide panel">⟨</button>
      </div>
      <div class="panel-section">
        <div class="controls">
          <button id="installBtn" class="btn-accent" hidden>Install</button>
          <button id="shareBtn">Copy share URL</button>
          <a class="btn" href="#" id="exportBtn" download="content.html">Export</a>
        </div>
      </div>
      <div class="panel-section">
        <h3>Paste HTML</h3>
        <textarea id="input" placeholder="&lt;h1&gt;Hello!&lt;/h1&gt;"></textarea>
        <div class="controls">
          <button id="saveBtn" class="btn-accent">Save</button>
          <label>Title <input id="docTitle" type="text" placeholder="Optional"></label>
        </div>
      </div>
      <div class="panel-section">
        <button id="clearBtn" class="btn danger">Reset all</button>
        <p>Tip: Ctrl/Cmd + B to toggle panel.</p>
      </div>
    </aside>
    <main class="stage">
      <iframe id="viewer" allow="geolocation" sandbox="allow-forms allow-pointer-lock allow-popups allow-modals allow-same-origin allow-scripts"></iframe>
      <button id="floatToggle" class="float-toggle" title="Show panel" hidden>☰</button>
    </main>
  </div>
  <script src="./app.js" type="module"></script>
</body>
</html>
